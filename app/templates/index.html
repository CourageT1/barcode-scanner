<!-- templates/index.html -->
{% extends 'layout.html' %}

{% block content %}
    <section>
        <h2>Welcome to Shopping Made Easy!</h2>
        <p>Explore our products and enjoy a convenient shopping experience.</p>
        <p>Scan barcodes, discover promotions, and find your favorite items effortlessly.</p>
    </section>

    <section>
        <h2>Featured Products</h2>
        <!-- Display products dynamically from the database -->
        {% for product in products %}
            <div class="product">
                <img src="{{ url_for('static', filename='images/' + product.image_filename) }}" alt="{{ product.name }}">
                <p>{{ product.name }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Expiry Date: {{ product.expiry_date }}</p>
                <button onclick="scanBarcode('{{ product.barcode }}')">Scan Barcode</button>
            </div>
        {% endfor %}
    </section>

    <section>
        <h2>Add a New Product</h2>
        <form action="/submit_product" method="post" enctype="multipart/form-data">
            <label for="barcode">Barcode:</label>
            <input type="text" name="barcode" required>
            
            <label for="name">Product Name:</label>
            <input type="text" name="name" required>
            
            <label for="price">Price:</label>
            <input type="text" name="price" required>
            
            <label for="expiry_date">Expiry Date:</label>
            <input type="text" name="expiry_date">
            
            <label for="image">Product Image:</label>
            <input type="file" name="image" accept="image/*" required>
            
            <button type="submit">Submit</button>
        </form>
    </section>
{% endblock %}
